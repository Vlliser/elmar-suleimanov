<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Видео-комментарии адвоката Эльмара Сулейманова — правовые разъяснения, судебная практика, советы по защите прав.">
<title>Медиа · Эльмар Сулейманов · Адвокат</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --navy:#0A1628; --navy-mid:#162240; --gold:#B8972A; --gold-light:#D4B050;
  --bg:#F5F3EF; --bg2:#EDEAE4; --surface:#FFFFFF;
  --text:#0A1628; --text-muted:#5A6478; --border:rgba(10,22,40,0.12);
  --header-bg:rgba(245,243,239,0.95); --transition:0.35s cubic-bezier(0.4,0,0.2,1);
}
[data-theme="dark"] {
  --bg:#090E18; --bg2:#0F1825; --surface:#111B2E;
  --text:#EDE9E0; --text-muted:#8E9AAD; --border:rgba(184,151,42,0.15);
  --header-bg:rgba(9,14,24,0.95);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden;transition:background var(--transition),color var(--transition);}

/* HEADER */
header{position:fixed;top:0;left:0;right:0;z-index:100;padding:0 5vw;height:72px;display:flex;align-items:center;justify-content:space-between;background:var(--header-bg);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);}
.logo{display:flex;flex-direction:column;gap:1px;text-decoration:none;}
.logo-name{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:500;color:var(--text);letter-spacing:.02em;}
.logo-sub{font-size:.6rem;font-weight:300;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);}
.header-right{display:flex;align-items:center;gap:1.25rem;}
.back-link{display:flex;align-items:center;gap:.5rem;font-size:.72rem;letter-spacing:.08em;text-transform:uppercase;color:var(--text-muted);text-decoration:none;transition:color var(--transition);}
.back-link:hover{color:var(--gold);}
.back-link svg{transition:transform var(--transition);}
.back-link:hover svg{transform:translateX(-3px);}
.theme-btn{background:none;border:1px solid var(--border);width:36px;height:36px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--text-muted);transition:all var(--transition);}
.theme-btn:hover{border-color:var(--gold);color:var(--gold);}

/* PAGE HERO */
.page-hero{padding:120px 5vw 0;overflow:hidden;}
.page-hero-inner{display:grid;grid-template-columns:1fr auto;align-items:end;gap:2rem;padding-bottom:3rem;border-bottom:1px solid var(--border);}
@media(max-width:600px){.page-hero-inner{grid-template-columns:1fr;}}
.page-eyebrow{font-size:.65rem;letter-spacing:.22em;text-transform:uppercase;color:var(--gold);margin-bottom:1rem;display:flex;align-items:center;gap:1rem;}
.page-eyebrow::before{content:'';display:block;width:30px;height:1px;background:var(--gold);}
.page-hero h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,4.2rem);font-weight:300;line-height:1.1;letter-spacing:-.01em;}
.page-hero h1 em{font-style:italic;color:var(--gold);}
.hero-meta{text-align:right;font-size:.72rem;color:var(--text-muted);letter-spacing:.05em;}
.hero-meta strong{display:block;font-size:2.2rem;font-family:'Cormorant Garamond',serif;font-weight:300;color:var(--text);line-height:1;margin-bottom:.25rem;}
@media(max-width:600px){.hero-meta{text-align:left;}}

/* FEATURED */
.featured-section{padding:4rem 5vw 0;}
.section-eyebrow{font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;}
.section-eyebrow::before{content:'';display:block;width:24px;height:1px;background:var(--gold);}
.featured-grid{display:grid;grid-template-columns:1fr 320px;gap:2px;background:var(--border);border:1px solid var(--border);}
@media(max-width:860px){.featured-grid{grid-template-columns:1fr;}}

/* Player */
.featured-player-wrap{position:relative;aspect-ratio:16/9;background:#000;overflow:hidden;}
.featured-cover{position:absolute;inset:0;cursor:pointer;overflow:hidden;}
.featured-cover img{width:100%;height:100%;object-fit:cover;transition:transform .5s ease,filter .4s ease;display:block;}
.featured-cover:hover img{transform:scale(1.03);filter:brightness(.65);}
.play-btn-center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;}
.play-circle{width:76px;height:76px;border-radius:50%;background:rgba(184,151,42,.92);display:flex;align-items:center;justify-content:center;box-shadow:0 8px 32px rgba(0,0,0,.35);transition:transform .3s ease,background .3s ease;}
.featured-cover:hover .play-circle{transform:scale(1.1);background:var(--gold-light);}
.play-circle svg{margin-left:4px;color:var(--navy);}
.featured-player-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:none;display:none;}
.featured-player-wrap.playing .featured-cover{display:none;}
.featured-player-wrap.playing iframe{display:block;}

/* Info panel */
.featured-info{background:var(--surface);padding:2rem 1.75rem;display:flex;flex-direction:column;gap:1.25rem;justify-content:center;}
.featured-badge{display:inline-flex;align-items:center;gap:.5rem;font-size:.58rem;letter-spacing:.14em;text-transform:uppercase;color:var(--gold);font-weight:500;}
.featured-badge::before{content:'';display:block;width:16px;height:1px;background:var(--gold);}
.featured-info h2{font-family:'Cormorant Garamond',serif;font-size:1.35rem;font-weight:400;line-height:1.3;color:var(--text);}
.featured-info h2.loading{font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:300;color:var(--text-muted);font-style:italic;}
.featured-tags{display:flex;flex-wrap:wrap;gap:.5rem;}
.tag-pill{font-size:.56rem;letter-spacing:.1em;text-transform:uppercase;color:var(--text-muted);padding:4px 10px;border:1px solid var(--border);}
.watch-btn{display:inline-flex;align-items:center;gap:.5rem;padding:11px 24px;background:var(--navy);color:#EDE9E0;font-size:.7rem;font-weight:500;letter-spacing:.1em;text-transform:uppercase;border:none;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all var(--transition);width:fit-content;margin-top:.25rem;}
.watch-btn:hover{background:var(--navy-mid);}
[data-theme="dark"] .watch-btn{background:var(--gold);color:var(--navy);}
[data-theme="dark"] .watch-btn:hover{background:var(--gold-light);}

/* VIDEO GRID */
.videos-section{padding:4rem 5vw 6rem;}
.section-row{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border);}
.section-row-label{font-size:.62rem;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);display:flex;align-items:center;gap:.75rem;}
.section-row-label::before{content:'';display:block;width:24px;height:1px;background:var(--gold);}
.video-count-label{font-size:.68rem;color:var(--text-muted);}
.video-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--border);border:1px solid var(--border);}
@media(max-width:1100px){.video-grid{grid-template-columns:repeat(3,1fr);}}
@media(max-width:700px){.video-grid{grid-template-columns:repeat(2,1fr);}}
@media(max-width:420px){.video-grid{grid-template-columns:1fr;}}

.video-card{background:var(--surface);cursor:pointer;transition:background var(--transition);}
.video-card:hover{background:var(--bg2);}
.video-thumb{position:relative;aspect-ratio:16/9;overflow:hidden;}
.video-thumb img{width:100%;height:100%;object-fit:cover;transition:transform .5s ease;display:block;}
.video-card:hover .video-thumb img{transform:scale(1.06);}
.thumb-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(10,22,40,.55) 0%,transparent 55%);}
.play-sm{position:absolute;bottom:.7rem;right:.7rem;width:32px;height:32px;border-radius:50%;background:rgba(184,151,42,.9);display:flex;align-items:center;justify-content:center;transition:transform .25s ease;}
.video-card:hover .play-sm{transform:scale(1.15);}
.play-sm svg{margin-left:2px;color:var(--navy);}
.vid-num{position:absolute;top:.55rem;left:.55rem;font-size:.52rem;letter-spacing:.1em;font-weight:500;color:rgba(255,255,255,.75);background:rgba(10,22,40,.55);padding:2px 7px;}
.video-meta{padding:.9rem 1rem 1rem;}
.video-topic{font-size:.53rem;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:.3rem;}
.video-title{font-family:'Cormorant Garamond',serif;font-size:.98rem;font-weight:400;line-height:1.3;color:var(--text);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:2.55em;}
.video-title.loading{font-family:'DM Sans',sans-serif;font-size:.75rem;font-weight:300;color:var(--text-muted);font-style:italic;}

/* LIGHTBOX */
.lightbox{display:none;position:fixed;inset:0;z-index:500;background:rgba(5,10,20,.96);backdrop-filter:blur(10px);align-items:center;justify-content:center;padding:1.5rem;}
.lightbox.open{display:flex;}
.lb-inner{width:100%;max-width:960px;display:flex;flex-direction:column;gap:1rem;}
.lb-top{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;padding-bottom:.75rem;border-bottom:1px solid rgba(184,151,42,.2);}
.lb-title{font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-weight:400;color:#EDE9E0;line-height:1.3;flex:1;}
.lb-close{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);width:40px;height:40px;cursor:pointer;color:rgba(237,233,224,.8);font-size:1rem;display:flex;align-items:center;justify-content:center;transition:all var(--transition);flex-shrink:0;border-radius:4px;}
.lb-close:hover{background:rgba(255,255,255,.18);color:#fff;}
.lb-video{position:relative;width:100%;aspect-ratio:16/9;background:#000;}
.lb-video iframe{position:absolute;inset:0;width:100%;height:100%;border:none;}
.lb-nav{display:flex;align-items:center;justify-content:space-between;}
.lb-counter{font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;color:rgba(237,233,224,.35);}
.lb-arrows{display:flex;gap:.5rem;}
.lb-arrow{background:none;border:1px solid rgba(184,151,42,.35);width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(237,233,224,.6);transition:all var(--transition);}
.lb-arrow:hover{border-color:var(--gold);color:var(--gold);}
.lb-arrow:disabled{opacity:.2;cursor:not-allowed;}

/* EMBED BLOCKED FALLBACK */
.embed-blocked{
  display:none;position:absolute;inset:0;
  align-items:center;justify-content:center;flex-direction:column;gap:1.25rem;
  background:linear-gradient(135deg,#0d1520 0%,#0a1628 100%);
  text-align:center;padding:2rem;
}
.embed-blocked.show{display:flex;}
.embed-blocked-icon{
  width:64px;height:64px;border-radius:50%;
  background:rgba(184,151,42,.12);border:1px solid rgba(184,151,42,.25);
  display:flex;align-items:center;justify-content:center;color:var(--gold);
}
.embed-blocked p{font-size:.82rem;color:rgba(237,233,224,.5);font-weight:300;max-width:320px;line-height:1.6;}
.embed-blocked strong{display:block;font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:400;color:rgba(237,233,224,.85);margin-bottom:.25rem;}
.yt-open-btn{
  display:inline-flex;align-items:center;gap:.6rem;
  padding:12px 28px;background:var(--gold);color:var(--navy);
  font-size:.72rem;font-weight:500;letter-spacing:.1em;text-transform:uppercase;
  text-decoration:none;transition:all var(--transition);font-family:'DM Sans',sans-serif;
}
.yt-open-btn:hover{background:var(--gold-light);}

/* FOOTER */
.page-footer{background:var(--navy);padding:2rem 5vw;display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;border-top:1px solid rgba(184,151,42,.2);}
.footer-copy{font-size:.72rem;color:rgba(237,233,224,.3);}
.footer-back{display:flex;align-items:center;gap:.4rem;font-size:.68rem;letter-spacing:.1em;text-transform:uppercase;color:rgba(237,233,224,.4);text-decoration:none;transition:color var(--transition);}
.footer-back:hover{color:var(--gold);}

/* REVEAL */
.reveal{opacity:0;transform:translateY(22px);transition:opacity .6s ease,transform .6s ease;}
.reveal.visible{opacity:1;transform:translateY(0);}
.rd1{transition-delay:.08s;}.rd2{transition-delay:.16s;}.rd3{transition-delay:.24s;}
</style>
</head>
<body>

<header>
  <a href="index.html" class="logo">
    <span class="logo-name">Эльмар Сулейманов</span>
    <span class="logo-sub">Адвокат · Баку</span>
  </a>
  <div class="header-right">
    <a href="index.html" class="back-link">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      На главную
    </a>
    <button class="theme-btn" id="theme-btn" aria-label="Тема">
      <svg id="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
      <svg id="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>
  </div>
</header>

<!-- HERO -->
<section class="page-hero">
  <div class="page-hero-inner">
    <div>
      <p class="page-eyebrow reveal">Видеоматериалы</p>
      <h1 class="reveal rd1">Правовые<br><em>комментарии</em><br>и интервью</h1>
    </div>
    <div class="hero-meta reveal rd2">
      <strong>21</strong>видео
    </div>
  </div>
</section>

<!-- FEATURED -->
<section class="featured-section">
  <p class="section-eyebrow reveal">Главное видео</p>
  <div class="featured-grid reveal rd1">
    <div class="featured-player-wrap" id="featured-wrap">
      <div class="featured-cover" id="featured-cover" onclick="playFeatured()">
        <img src="https://img.youtube.com/vi/ZhOoy30hdJY/maxresdefault.jpg"
             onerror="this.src='https://img.youtube.com/vi/ZhOoy30hdJY/hqdefault.jpg'"
             alt="Главное видео">
        <div class="play-btn-center">
          <div class="play-circle">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          </div>
        </div>
      </div>
      <iframe id="featured-iframe"
        src=""
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
      <div class="embed-blocked" id="featured-blocked">
        <div class="embed-blocked-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.76a4.85 4.85 0 0 1-1.01-.07z"/></svg>
        </div>
        <div>
          <strong>Встраивание ограничено</strong>
          <p>Автор запретил воспроизведение на сторонних сайтах.</p>
        </div>
        <a id="featured-yt-link" href="https://www.youtube.com/watch?v=ZhOoy30hdJY" target="_blank" rel="noopener" class="yt-open-btn">
          Открыть на YouTube
        </a>
      </div>
    </div>
    <div class="featured-info">
      <span class="featured-badge">Актуально</span>
      <h2 id="featured-title" class="loading">Загрузка названия…</h2>
      <div class="featured-tags">
        <span class="tag-pill">Адвокат</span>
        <span class="tag-pill">Азербайджан</span>
        <span class="tag-pill">Право</span>
      </div>
      <button class="watch-btn" onclick="playFeatured()">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        Смотреть
      </button>
    </div>
  </div>
</section>

<!-- GRID -->
<section class="videos-section">
  <div class="section-row reveal">
    <span class="section-row-label">Все выпуски</span>
    <span class="video-count-label">20 видео</span>
  </div>
  <div class="video-grid" id="video-grid"></div>
</section>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox">
  <div class="lb-inner">
    <div class="lb-top">
      <div class="lb-title" id="lb-title">Видео</div>
      <button class="lb-close" id="lb-close">&#x2715;</button>
    </div>
    <div class="lb-video">
      <iframe id="lb-iframe" src=""
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
      <div class="embed-blocked" id="lb-blocked">
        <div class="embed-blocked-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.76a4.85 4.85 0 0 1-1.01-.07z"/></svg>
        </div>
        <div>
          <strong id="lb-blocked-title">Встраивание ограничено</strong>
          <p>Автор запретил воспроизведение на сторонних сайтах. Нажмите кнопку ниже, чтобы открыть видео напрямую на YouTube.</p>
        </div>
        <a id="lb-yt-link" href="#" target="_blank" rel="noopener" class="yt-open-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.18 8.18 0 0 0 4.78 1.52V6.76a4.85 4.85 0 0 1-1.01-.07z"/></svg>
          Открыть на YouTube
        </a>
      </div>
    </div>
    <div class="lb-nav">
      <span class="lb-counter" id="lb-counter"></span>
      <div class="lb-arrows">
        <button class="lb-arrow" id="lb-prev">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <button class="lb-arrow" id="lb-next">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>
  </div>
</div>

<footer class="page-footer">
  <span class="footer-copy">&#169; 2025 Эльмар Сулейманов &middot; Адвокат &middot; Баку</span>
  <a href="index.html" class="footer-back">
    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Главная страница
  </a>
</footer>

<script>
// ─── ДАННЫЕ ───────────────────────────────────────────────────────
const FEATURED_ID = 'ZhOoy30hdJY';

// Сетка: 20 видео (featured тоже включён для полноты)
const videos = [
  'Ft5m8PNDnp4','YeVWf4YqP4g','BFe5kdW32qs','MuWAJZkQ8wk',
  '1AXK8HCAiQQ','SpjjR8PJUXQ','OUaWEbqLbpk','Vw9gU_xI4os',
  '4E3N8zFC3Jg','7YuBerhPJ8I','h-0xemEX_dU','t3lDgbTyUyA',
  'FWxF09XnAh0','77YVBtXZMZk','E2uF70qsm9U','nURQIerkTBo',
  'jnXVNrt_SFk','7Ixj-1kmfi4','uXI0FJglvfc','ZhOoy30hdJY'
];

// Кэш названий
const titleCache = {};

// ─── ЗАГРУЗКА НАЗВАНИЙ через YouTube oEmbed ───────────────────────
// YouTube oEmbed не требует API-ключа и работает в браузере
async function fetchTitle(id) {
  if (titleCache[id]) return titleCache[id];
  try {
    const r = await fetch(
      'https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=' + id + '&format=json'
    );
    if (!r.ok) throw new Error('bad status');
    const d = await r.json();
    titleCache[id] = d.title || null;
    return titleCache[id];
  } catch (e) {
    return null;
  }
}

function embedSrc(id) {
  return 'https://www.youtube.com/embed/' + id + '?autoplay=1&rel=0&modestbranding=1';
}

// ─── РЕНДЕР СЕТКИ ─────────────────────────────────────────────────
const grid = document.getElementById('video-grid');

videos.forEach(function(id, i) {
  var card = document.createElement('div');
  card.className = 'video-card reveal' + (i % 3 === 1 ? ' rd1' : i % 3 === 2 ? ' rd2' : '');
  card.innerHTML =
    '<div class="video-thumb">' +
      '<img src="https://img.youtube.com/vi/' + id + '/mqdefault.jpg"' +
           ' onerror="this.src=\'https://img.youtube.com/vi/' + id + '/default.jpg\'"' +
           ' alt="Видео ' + (i+1) + '" loading="lazy">' +
      '<div class="thumb-overlay"></div>' +
      '<div class="play-sm">' +
        '<svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>' +
      '</div>' +
      '<span class="vid-num">' + String(i+1).padStart(2,'0') + '</span>' +
    '</div>' +
    '<div class="video-meta">' +
      '<p class="video-topic">Адвокат &middot; Баку</p>' +
      '<p class="video-title loading" id="vt-' + id + '">Загрузка&hellip;</p>' +
    '</div>';

  card.addEventListener('click', (function(idx){ return function(){ openLightbox(idx); }; })(i));
  grid.appendChild(card);

  // Загружаем название
  fetchTitle(id).then(function(title) {
    var el = document.getElementById('vt-' + id);
    if (el) {
      el.textContent = title || 'Правовой комментарий';
      el.classList.remove('loading');
    }
  });
});

// Название главного видео
fetchTitle(FEATURED_ID).then(function(title) {
  var el = document.getElementById('featured-title');
  if (el) {
    el.textContent = title || 'Правовой комментарий';
    el.classList.remove('loading');
  }
});

// ─── FEATURED PLAYER ──────────────────────────────────────────────
function playFeatured() {
  var wrap    = document.getElementById('featured-wrap');
  var iframe  = document.getElementById('featured-iframe');
  var blocked = document.getElementById('featured-blocked');
  blocked.classList.remove('show');
  iframe.src = embedSrc(FEATURED_ID);
  wrap.classList.add('playing');
  // Detect embed block: if iframe stays empty after short delay, show fallback
  iframe.onload = function() {
    // Small timeout to let YouTube set the error state
    setTimeout(function() {
      try {
        // If contentDocument is accessible and blank, it's blocked
        var doc = iframe.contentDocument || iframe.contentWindow.document;
        if (doc && doc.body && doc.body.innerHTML === '') {
          blocked.classList.add('show');
        }
      } catch(e) {
        // Cross-origin — means it loaded fine (YouTube domain)
      }
    }, 1500);
  };
}

// ─── LIGHTBOX ─────────────────────────────────────────────────────
var curIdx   = 0;
var lb       = document.getElementById('lightbox');
var lbIframe = document.getElementById('lb-iframe');
var lbTitle  = document.getElementById('lb-title');
var lbCtr    = document.getElementById('lb-counter');
var lbPrev   = document.getElementById('lb-prev');
var lbNext   = document.getElementById('lb-next');

function openLightbox(idx) {
  curIdx = idx;
  renderLb();
  lb.classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeLightbox() {
  lb.classList.remove('open');
  lbIframe.src = '';
  lbIframe.style.display = 'block';
  document.getElementById('lb-blocked').classList.remove('show');
  document.body.style.overflow = '';
}
function renderLb() {
  var id = videos[curIdx];
  var blocked = document.getElementById('lb-blocked');
  var ytLink  = document.getElementById('lb-yt-link');
  var blockedTitle = document.getElementById('lb-blocked-title');

  // Reset state
  blocked.classList.remove('show');
  lbIframe.style.display = 'block';

  // Set title
  var titleEl = document.getElementById('vt-' + id);
  var titleText = (titleEl && !titleEl.classList.contains('loading'))
    ? titleEl.textContent : ('Видео ' + (curIdx + 1));
  lbTitle.textContent = titleText;
  if (blockedTitle) blockedTitle.textContent = titleText;

  // Set YT fallback link
  if (ytLink) ytLink.href = 'https://www.youtube.com/watch?v=' + id;

  // Set iframe src
  lbIframe.src = embedSrc(id);

  // Counter & nav
  lbCtr.textContent = (curIdx + 1) + ' / ' + videos.length;
  lbPrev.disabled = curIdx === 0;
  lbNext.disabled = curIdx === videos.length - 1;

  // Detect embed block after load
  lbIframe.onload = function() {
    setTimeout(function() {
      try {
        var doc = lbIframe.contentDocument || lbIframe.contentWindow.document;
        if (doc && doc.body && doc.body.innerHTML === '') {
          lbIframe.style.display = 'none';
          blocked.classList.add('show');
        }
      } catch(e) {
        // Cross-origin = loaded fine
      }
    }, 1500);
  };
}

lbPrev.addEventListener('click', function() { if (curIdx > 0) { curIdx--; renderLb(); } });
lbNext.addEventListener('click', function() { if (curIdx < videos.length - 1) { curIdx++; renderLb(); } });
document.getElementById('lb-close').addEventListener('click', closeLightbox);
lb.addEventListener('click', function(e) { if (e.target === lb) closeLightbox(); });
document.addEventListener('keydown', function(e) {
  if (!lb.classList.contains('open')) return;
  if (e.key === 'Escape') closeLightbox();
  if (e.key === 'ArrowRight' && curIdx < videos.length - 1) { curIdx++; renderLb(); }
  if (e.key === 'ArrowLeft'  && curIdx > 0)                 { curIdx--; renderLb(); }
});

// ─── ТЕМА ─────────────────────────────────────────────────────────
var html = document.documentElement;
var sun  = document.getElementById('icon-sun');
var moon = document.getElementById('icon-moon');
function applyTheme(t) {
  html.setAttribute('data-theme', t);
  localStorage.setItem('theme', t);
  sun.style.display  = t === 'dark' ? 'none' : '';
  moon.style.display = t === 'dark' ? ''     : 'none';
}
applyTheme(localStorage.getItem('theme') || 'light');
document.getElementById('theme-btn').addEventListener('click', function() {
  applyTheme(html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
});

// ─── REVEAL ───────────────────────────────────────────────────────
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(e) {
    if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
  });
}, { threshold: 0.07 });
document.querySelectorAll('.reveal').forEach(function(el) { observer.observe(el); });
</script>
</body>
</html>
